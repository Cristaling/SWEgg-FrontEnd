<mat-card class="hover-mat-card job-card" (click)="onJobClick(job)">
    <mat-card-header style="overflow:hidden;display: flex;align-items: center;">
        <img mat-card-avatar [matTooltip]="job.ownerName" class="header-user-image"
             [src]="getProfilePicture(job.ownerEmail)" onerror="this.src='../../../../assets/images/user-default-image.jpeg';"
            (click)="goToProfile(job.ownerEmail)">
        <mat-card-title style="text-align: center;">{{displayTitle(job.title)}}</mat-card-title>
        <mat-card-subtitle style="font-size: 13px;text-align: justify;">{{displayDescription(job.description)}}
        </mat-card-subtitle>
    </mat-card-header>
</mat-card>

<ng-template #jobModal>
    <mat-card>
        <mat-card-header>
            <img mat-card-avatar
                 [src]="getProfilePicture(selectedJob.ownerEmail)" (click)="goToProfile(selectedJob.ownerEmail)">
            <mat-card-title>
                <h3 class="m-0">{{selectedJob.title}}</h3>
            </mat-card-title>
            <mat-card-subtitle style="font-size: 13px;">by {{selectedJob.ownerName}}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content style="font-size: 13px;text-align: justify">{{selectedJob.description}}</mat-card-content>
        <mat-accordion>
            <mat-expansion-panel *ngIf="currentUser.email === selectedJob.ownerEmail">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        People who applied for this job
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-selection-list #userSelection (selectionChange)="onSelectedUserForJob($event)">
                    <mat-list-option *ngFor="let obiect of allAplicants" [value]="obiect">
                        <div style="display:flex">
                            <img class="img-circle" src="https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584__340.png" style="margin-right: 5em;width:20px;height:20px;">
                            <span>{{obiect.name}}</span>
                        </div>
                    </mat-list-option>
                </mat-selection-list>
                <button mat-button (click)="submitApplicant(userSelection)">
                    <mat-icon class="nav-icon">cancel</mat-icon>
                    Close
                </button>
            </mat-expansion-panel>
        </mat-accordion>


        <mat-card-actions>
            <div fxFlex fxLayoutAlign="center">
                <button *ngIf="currentUser.email !== selectedJob.ownerEmail" mat-button>
                    <mat-icon class="nav-icon">send</mat-icon>
                    Apply
                </button>
                <button mat-button (click)="closeDialog()">
                    <mat-icon class="nav-icon">cancel</mat-icon>
                    Close
                </button>
            </div>
        </mat-card-actions>
    </mat-card>
</ng-template>
